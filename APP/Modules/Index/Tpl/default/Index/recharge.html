<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">	<meta name="robots" content="noindex,nofollow">	<meta name="robots" content="noarchive">	<!-- 屏蔽-->	<title>充值</title>	<meta name="keywords" content="">	<meta name="viewport" content="initial-scale=1, maximum-scale=1">	<meta name="apple-mobile-web-app-capable" content="yes">	<meta name="apple-mobile-web-app-status-bar-style" content="black">	<meta content="IE=9; IE=EDGE" http-equiv="X-UA-Compatible">	<link rel="stylesheet" href="/Public/ybt/css/sm.css">	<script src="/Public/ybt/js/jquery-1.10.2.min.js"></script>	<link rel="stylesheet" href="/Public/ybt/css/sm-extend.css">	<link rel="stylesheet" href="/Public/ybt/css/iconfont.css">	<link rel="stylesheet" href="/Public/ybt/css/main.css">	<link rel="stylesheet" href="/Public/ybt/css/order.css">		<link rel="stylesheet" href="/Public/ybt/css/layui.css">	<!-- 变量声明  -->	<style>		.info-top .uphoto img{			width:70px;			height:70px;		}				.top-info{			width:100%;			height:200px;			position: relative;		}				.content{			height:100%;			width:100%;			padding-bottom: 0rem;		}				.info-top .uinfo{			border-left:none;			padding:0;			margin:0;			margin-top: 10px;			opacity:0.8;		}				.info-top .uphoto{			width:22%;		}			.property{			width:90%;			height:auto;			margin:30px auto;		}		.detail-div{			background: url('/Public/ybt/image/center/fang1.png');			width:90%;			height:260px;			margin:30px auto;			padding:35px 30px;		}				.btn{			width:100%;			margin: 20px auto;			height:auto;			display: inline-block;			text-align: center;		}				.btn a{			width: 70%;			height:100%!important;			color:#fff;			font-size: 16px;			height:53px!important;			line-height: 53px!important;			display:inline-block;		}				.button-success{			background-image: linear-gradient(to right,#6DB8F9,#3A83F6);			border-radius: 30px;			border-top-left-radius: 10px;		}				.top-div{			z-index: 999;			top:0;			width:100%;			height:75px;			background: #101C3E;			margin-bottom: 0;			position: fixed;		}				.money-info{			width:100%;			height:40%;			float: left;			margin-top: 20px;		}				#cancle{			position: absolute;			left:20px;			top:50%;			margin-top: -9px;			color:#fff;		}				.money-info ul{			width:100%;			height:100%;		}				.money-info ul li{			width:49.5%;			text-align: center;			color:#fff;			height:100%;			display: inline-block;			float: left;		}				.money-info ul li p{			margin:10px auto;		}				.border-line{			height:100%;			width:1px;			background: #fff;			display: inline-block;			float: left;		}				.money{			font-size: 30px;		}				.money-name{			font-size: 14px;			color:#D6D6D6;		}				.detail-div .detail-title{			color:#D6D6D6;			width:30%;		}				.detail-div table{			width:100%;			height:100%;		}				.detail-div .input{			width:70%;			color:#fff;			background: transparent;			border:none;		}				.detail-div .input select{			background: transparent;			border:none;			height:100%;			background-color: #12419c;		}				.detail-div tr td{			line-height: 48px;			height:48px;			float: left;		}				.detail-div .input input{			background: none;			border:none;			height:100%;		}				input::placeholder{			color:#fff;		}				.input-div{			width: 90%;			height: 50px;			line-height: 50px;			margin: auto;			color: #C2C7E4;			font-size: 16px;			border-bottom: 1px solid #727B9E;			display: none;			flex-direction: row;		}				.layui-input, .layui-select, .layui-textarea{			background: none;			border:none;			height:100%;			color:#fff;		}				.bao-div{			width:100%;			height:auto;			float: left;			margin-top:5px;		}				.bao-div .bao-title{			color:#fff;			width:90%;			margin:20px;			position: relative;			padding-left: 15px;			font-size: 16px;		}				.qrcode-div{			width:100px;			height:100px;			border-radius: 5px;			background: #fff;			float:left;			position: relative;		}				.camera{			position: absolute;			left:50%;			margin-left: -16px;			margin-top: 30px;			width:32px;			height:32px;		}				#pre-img,#pre-img2{			width:100%;			height:100%;			position: absolute;			top:0;			left:0;			opacity: 0;			border-radius:5px;		}				.stright-line{			height:100%;			background: #fff;			width:5px;			border-radius: 10px;			position: absolute;			left:0;			top:0;		}				.choose-list{			width:100%;			float:left;			padding:0 10px;		}				.choose-one{			width:30%;			height:65px;			background: transparent;			border:1px solid #7886b0;			color:#7886b0;			font-size: 16px;			border-radius: 6px;			text-align: center;			padding-top: 10px;			margin:5px;			float: left;		}				.choose-one p:first-child{			font-size: 18px;		}				.choose-one p:nth-child(2){			font-size: 13px;		}				.actived{			color:#c2c7e4;			border-color: #c2c7e4;		}		.showimg{			display: none;			width: 300px;			position: fixed;			top:50%;			left:50%;			z-index: 10002;			transform: translate(-50%,-50%);		}		.shade{			position: absolute;			top: 0;			left: 0;			width: 100%;			height: 2000px;			background-color:rgba(0,0,0,0.5);			display: none;			z-index: 10001;		}				.page{			background: #101C3E;		}				.layui-form{			margin-top:80px;			background:#263059;			border-top-left-radius: 30px;			border-top-right-radius: 30px;		}				.payway-div{			background: #465686;			width: 90%;			height:auto;			border-radius: 10px;			margin:0 auto;			margin-top: 20px;			padding:15px;			color:#fff;			font-size: 16px;		}				.payway-div p{			height: 35px;			line-height: 35px;		}				.payway-title{			color:#C2C7E4;		}				.text-div{			color:#eee;			width:67%;			float: left;			height:100%;			padding:10px;		}				.text-div p:first-child{			color:#C2C7E4;		}				._box{			display: none;		}				@media screen and (max-width:320px){			.qrcode-div{				width:90px;				height:90px;			}						.text-div{				width: 65%;			}		}	</style></head><body style=""><div class="page">	<div class="content" id="main_content">	<!-- 标题栏 -->		<div class="top-div">			<a style="width: 100%;text-align: center;display: inline-block;line-height:75px;font-size: 0.9rem; color:#FFF;">充值</a>		    <a id="cancle" href="javascript:history.back(-1)"><i class="icon icon-left"></i></a>		</div>		<form class="layui-form">			<div class="bao-div">				<div class="bao-title">					 请选择充值金额					<div class="stright-line"></div>				</div>				<div class="choose-list">					<volist name="config.selection" id="s">					<div class="choose-one" data-amount="{:$s * C('rate')}">						<p>￥<if condition="$s egt 100000">{$s / 10000}万<else/> {$s}</if></p>						<p>(<if condition="$s egt 100000">{$s / 10000 * C('rate')}万<else/> {$s * C('rate')}</if>元气值)</p>					</div>					</volist>					<if condition="$config['issure'] eq 1">					<div class="choose-one" id="otheramount">						<p>其它金额</p>						<p>请输入金额</p>					</div>					</if>				</div>				<div class="input-div"><input type="number" class="layui-input" placeholder="请输入数量" name="amount" autocomplete="off"></div>			</div>						<div class="bao-div">				<div class="bao-title">					支付方式					<div class="stright-line"></div>				</div>				<div class="payway-div">					<if condition="$address['isshow']['wechat'] eq 1"><input type="radio" name="paytype" title="微信" lay-filter="paytype" value="wechat"></if>					<if condition="$address['isshow']['alipay'] eq 1"><input type="radio" name="paytype" title="支付宝" lay-filter="paytype" value="alipay"></if>					<if condition="$address['isshow']['bank'] eq 1 || $address['isshow']['bank2'] eq 1"><input type="radio" name="paytype" title="银行卡" lay-filter="paytype" value="bank"></if>					<if condition="$address['isshow']['usdt'] eq 1"><input type="radio" name="paytype" title="USDT" lay-filter="paytype" value="usdt"></if>				</div>				<div id="box_bank" class="_box">				<if condition="$address['isshow']['bank'] eq 1">				<div class="payway-div">					<p><span class="payway-title">转账银行：</span>{$address.bank}</p>					<p><span class="payway-title">银行支行：</span>{$address.bank_branch}</p>					<p><span class="payway-title">银行帐号：</span>{$address.bank_num}</p>					<p><span class="payway-title">收款人：</span>{$address.bank_name}</p>				</div>				</if>				<if condition="$address['isshow']['bank2'] eq 1">				<div class="payway-div">					<p><span class="payway-title">转账银行：</span>{$address.bank2}</p>					<p><span class="payway-title">银行支行：</span>{$address.bank_branch2}</p>					<p><span class="payway-title">银行帐号：</span>{$address.bank_num2}</p>					<p><span class="payway-title">收款人：</span>{$address.bank_name2}</p>				</div>				</if>				</div>				<div id="box_wechat" class="_box">				<if condition="$address['isshow']['wechat'] eq 1">				<div class="payway-div">					<div class="qrcode-div" id="wechat">						<div class="qrcode-image" style="width:100%;height:100%;background-image:url('{$address.wechat}');background-size:cover;background-position:50%;border-radius:5px" data-src='{$address.wechat}'></div>					</div>					<div class="text-div">						<p>微信收款码</p>						<p>用微信扫描二维码</p>					</div>					<div style="clear:both;"></div>				</div>				</if>				</div>				<div id="box_alipay" class="_box">				<if condition="$address['isshow']['alipay'] eq 1">				<div class="payway-div">					<div class="qrcode-div" id="alipay">						<div class="qrcode-image" style="width:100%;height:100%;background-image:url('{$address.alipay}');background-size:cover;background-position:50%;border-radius:5px" data-src='{$address.alipay}'></div>					</div>					<div class="text-div">						<p>支付宝收款码</p>						<p>用支付宝扫描二维码</p>					</div>					<div style="clear:both;"></div>				</div>				</if>				</div>				<div id="box_usdt" class="_box">				<if condition="$address['isshow']['usdt'] eq 1">				<div class="payway-div" >					<div class="qrcode-div" id="usdt">						<div class="qrcode-image" style="width:100%;height:100%;background-image:url('{$address.usdt_paycode}');background-size:cover;background-position:50%;border-radius:5px" data-src='{$address.usdt_paycode}'></div>					</div>					<div class="text-div" style="padding-top:0">						<p>USDT地址(ERC20)</p>						<textarea style="background:none;border:none;font-size:12px;width:100%;resize:none" id="usdt_address">{$address.usdt_address}</textarea>						<a href="javascript:;" style="font-size:12px;color:#ddd" onclick="copyArticle('usdt_address')">复制地址</a>					</div>										<div style="clear:both;"></div>				</div>				<div class="payway-div">					<p><span class="payway-title">应支付USDT：</span><span id="usdt_amount" style="font-weight:bold">0</span></p>					<p style="height:auto"><span class="payway-title" style="font-size:13px;line-height:16px">*禁止向USDT地址充值除USDT之外的资产，任何充入USDT地址的非USDT资产将不可找回。<br>*充值需要12个网络确认才能到账。</span></p>				</div>				</if>				</div>			</div>									<div class="bao-div">				<div class="bao-title">					支付凭证					<div class="stright-line"></div>				</div>								<div class="payway-div">					<div class="qrcode-div" id="test2" style="background:transparent;border:1px dashed #8C93AF;">						<img class="camera" src="/Public/ybt/image/center/paycode/camera.png">						<img src="" id="pre-img2">					</div>					<div class="text-div">						<p>上传凭证</p>						<p>请上传有效付款凭证</p>					</div>					<div style="clear:both;"></div>				</div>			</div>						<input id="upimg" name="image" type="hidden" value="">			<div class="btn">				<a lay-submit lay-filter="s" class="button button-success">立即上传</a>			</div>		</form>	</div><div class="showimg">	<img src="" style="width:100%"></div><div class="shade"></div></div><script src="/Public/ybt/js/layui.js"></script><script>$(".choose-one").first().addClass('actived');var usdt_rate = {:C("rate_usdt")};$("#usdt_amount").html(round($(".choose-one").first()[0].dataset.amount / usdt_rate,2));var paytype = "";layui.use(["upload",'form'],function(){	var upload = layui.upload	,form = layui.form;			// form.on('submit(*)', function(data){	// 	layer.msg(JSON.stringify(data.field));	// 	return false;	// });		$(".qrcode-image").click(function(){		$(".showimg").find("img").attr("src",this.dataset.src);		$(".showimg").fadeIn("fast");		$(".shade").fadeIn("fast");	})		$(".shade").click(function(){		$(".showimg").fadeOut("fast");		$(".shade").fadeOut("fast");	})		$("#otheramount").click(function(){		$(".input-div").css("display","flex");	})		var upload2 = upload.render({	    elem: '#test2' //绑定元素	    ,url: "{:U('Index/yuanqi/uploadImg')}" //上传接口	    ,exts: 'jpg|png|gif|'	    ,field:'file'	    ,choose: function(obj){	    //将每次选择的文件追加到文件队列			// var files = obj.pushFile();			//预读本地文件，如果是多文件，则会遍历。(不支持ie8/9)			// obj.preview(function(index, file, result){			//   $("#pre-img2").css('opacity','1');			//   $("#pre-img2").attr("src",result);			// });			layer.msg("上传中……",{time:0});		}	    ,done: function(res){   //上传完毕回调	    	layer.closeAll();	    	if (res.result == 1){	    		$("#pre-img2").css('opacity','1');				$("#pre-img2").attr("src",res.path);	    		$("#upimg").val(res.path);	    	}	    	layer.msg(res.msg);	    		    }	});		$(".choose-one").click(function(){		$(".choose-one").each(function(){			$(this).removeClass("actived");		});		$(this).addClass("actived");		if (this.id != "otheramount"){			$(".input-div").hide();			$("#usdt_amount").html(round(this.dataset.amount / usdt_rate,2))		}else{			$("#usdt_amount").html(round($("[name=amount]").val() / usdt_rate,2))		}			});		form.on("radio(paytype)",function(res){		$("._box").hide();		$("#box_"+res.value).show();		paytype = res.value;	})		form.on('submit(s)', function(res){		var amount = $(".choose-one.actived")[0].dataset.amount;		if (!amount){			amount = $("[name=amount]").val();			if (amount == ""){				layer.msg("请输入数量");				return false;			}		}		if (paytype == ""){		    layer.msg("请选择支付方式");			return false;		}		var image = res.field.image;		if (!image){			layer.msg("请上传付款凭证");			return false;		}				var data = {amount:amount,image:image,paytype:paytype}		if (paytype == "usdt"){			var rate = {:C('rate_usdt')};			var unit = "USDT"		}else{			var rate = {:C("rate")};			var unit = "元"		}				layer.confirm("请确认需要充值"+amount+"个元气值，并已付款"+round(amount / rate,2)+unit+"。",function(){			$.ajax({				url: "/index/yuanqi/charge_post",				type: "POST",				data: data,				success: function(re){					layer.msg(re.msg,{time:1500},function(){						if (re.success == 1){							window.history.back(-1);						}					})				}			})		})		return false;	});			$("[name=amount]").on("input",function(){		$("#usdt_amount").html(round(this.value / usdt_rate,2));	})});function copyArticle(id) {    if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){        const range = document.createRange();        range.selectNode(document.getElementById(id));        const selection = window.getSelection();        if(selection.rangeCount > 0) selection.removeAllRanges();        selection.addRange(range);        document.execCommand('copy');        layer.msg("复制成功");    }else{        //var input = document.createElement('input');        //input.setAttribute('readonly', 'readonly');        //input.setAttribute('value','我是复制的内容');        //document.body.appendChild(input);        //input.setSelectionRange(0, 9999);        //input.select();      	var e=document.getElementById(id);        e.select();        if (document.execCommand('copy')) {            document.execCommand('copy');            layer.msg("复制成功");        }    }}function round(num,pow){	return (Math.ceil(num * Math.pow(10,pow)) / Math.pow(10,pow)).toFixed(pow);}</script></body></html>